# –Ü–º–ø–æ—Ä—Ç—É—î–º–æ deque (–¥–≤–æ—Å—Ç–æ—Ä–æ–Ω–Ω—è —á–µ—Ä–≥–∞) –¥–ª—è –µ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—ó —Ä–æ–±–æ—Ç–∏ –∑ —á–µ—Ä–≥–∞–º–∏, —â–æ –ø–æ—Ç—Ä—ñ–±–Ω–∞ –¥–ª—è BFS.
from collections import deque
# –Ü–º–ø–æ—Ä—Ç—É—î–º–æ networkx –¥–ª—è –ø–æ–±—É–¥–æ–≤–∏ —Ç–∞ –º–∞–Ω—ñ–ø—É–ª—è—Ü—ñ–π –∑ –≥—Ä–∞—Ñ–æ–º.
import networkx as nx
# –Ü–º–ø–æ—Ä—Ç—É—î–º–æ matplotlib.pyplot –¥–ª—è –≤—ñ–∑—É–∞–ª—ñ–∑–∞—Ü—ñ—ó –≥—Ä–∞—Ñ–∞ (–º–∞–ª—é–≤–∞–Ω–Ω—è).
import matplotlib.pyplot as plt

# --- 1. –ê–ª–≥–æ—Ä–∏—Ç–º –ï–¥–º–æ–Ω–¥—Å–∞-–ö–∞—Ä–ø–∞ ---

# –í–∏–∑–Ω–∞—á–µ–Ω–Ω—è —Ñ—É–Ω–∫—Ü—ñ—ó BFS (–ø–æ—à—É–∫ –≤ —à–∏—Ä–∏–Ω—É) –¥–ª—è –∑–Ω–∞—Ö–æ–¥–∂–µ–Ω–Ω—è –∑–±—ñ–ª—å—à—É—é—á–æ–≥–æ —à–ª—è—Ö—É –≤ –∑–∞–ª–∏—à–∫–æ–≤–æ–º—É –≥—Ä–∞—Ñ—ñ.
def bfs(capacity_matrix, flow_matrix, source, sink, parent):
    """–®—É–∫–∞—î —à–ª—è—Ö –≤—ñ–¥ source –¥–æ sink —É –∑–∞–ª–∏—à–∫–æ–≤–æ–º—É –≥—Ä–∞—Ñ—ñ (BFS)."""
    # –û—Ç—Ä–∏–º—É—î–º–æ –∑–∞–≥–∞–ª—å–Ω—É –∫—ñ–ª—å–∫—ñ—Å—Ç—å –≤—É–∑–ª—ñ–≤ —É –≥—Ä–∞—Ñ—ñ (—Ä–æ–∑–º—ñ—Ä –º–∞—Ç—Ä–∏—Ü—ñ).
    num_nodes = len(capacity_matrix)
    # –°—Ç–≤–æ—Ä—é—î–º–æ –º–∞—Å–∏–≤ –¥–ª—è –≤—ñ–¥—Å—Ç–µ–∂–µ–Ω–Ω—è –≤—ñ–¥–≤—ñ–¥–∞–Ω–∏—Ö –≤—É–∑–ª—ñ–≤, —ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑—É—é—á–∏ –≤—Å—ñ —è–∫ False.
    visited = [False] * num_nodes
    # –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑—É—î–º–æ —á–µ—Ä–≥—É, –¥–æ–¥–∞—é—á–∏ –≤–∏—Ö—ñ–¥–Ω–∏–π –≤—É–∑–æ–ª (source).
    queue = deque([source])
    # –ü–æ–∑–Ω–∞—á–∞—î–º–æ –≤–∏—Ö—ñ–¥–Ω–∏–π –≤—É–∑–æ–ª —è–∫ –≤—ñ–¥–≤—ñ–¥–∞–Ω–∏–π.
    visited[source] = True
    
    # –ì–æ–ª–æ–≤–Ω–∏–π —Ü–∏–∫–ª BFS: –ø—Ä–æ–¥–æ–≤–∂—É—î–º–æ, –¥–æ–∫–∏ —á–µ—Ä–≥–∞ –Ω–µ –ø–æ—Ä–æ–∂–Ω—è.
    while queue:
        # –í–∏—Ç—è–≥—É—î–º–æ –ø–æ—Ç–æ—á–Ω–∏–π –≤—É–∑–æ–ª (u) –∑ –ø–æ—á–∞—Ç–∫—É —á–µ—Ä–≥–∏.
        u = queue.popleft()
        
        # –ü–µ—Ä–µ–±–∏—Ä–∞—î–º–æ –≤—Å—ñ –º–æ–∂–ª–∏–≤—ñ –≤—É–∑–ª–∏ (v) —è–∫ –ø–æ—Ç–µ–Ω—Ü—ñ–π–Ω–∏—Ö —Å—É—Å—ñ–¥—ñ–≤.
        for v in range(num_nodes):
            # –ü–µ—Ä–µ–≤—ñ—Ä—è—î–º–æ, —á–∏ —î –∑–∞–ª–∏—à–∫–æ–≤–∞ –ø—Ä–æ–ø—É—Å–∫–Ω–∞ –∑–¥–∞—Ç–Ω—ñ—Å—Ç—å –Ω–∞ —Ä–µ–±—Ä—ñ (u, v) > 0.
            if not visited[v] and capacity_matrix[u][v] - flow_matrix[u][v] > 0:
                # –í—Å—Ç–∞–Ω–æ–≤–ª—é—î–º–æ u —è–∫ –±–∞—Ç—å–∫—ñ–≤—Å—å–∫–∏–π –≤—É–∑–æ–ª –¥–ª—è v (–¥–ª—è –≤—ñ–¥–Ω–æ–≤–ª–µ–Ω–Ω—è —à–ª—è—Ö—É).
                parent[v] = u
                # –ü–æ–∑–Ω–∞—á–∞—î–º–æ v —è–∫ –≤—ñ–¥–≤—ñ–¥–∞–Ω–∏–π.
                visited[v] = True
                # –Ø–∫—â–æ —Å—É—Å—ñ–¥ v ‚Äî —Ü–µ —Å—Ç—ñ–∫ (–º–µ—Ç–∞), —à–ª—è—Ö –∑–Ω–∞–π–¥–µ–Ω–æ.
                if v == sink:
                    return True  # –ü–æ–≤–µ—Ä—Ç–∞—î–º–æ True.
                # –î–æ–¥–∞—î–º–æ v –¥–æ —á–µ—Ä–≥–∏ –¥–ª—è –ø–æ–¥–∞–ª—å—à–æ–≥–æ –¥–æ—Å–ª—ñ–¥–∂–µ–Ω–Ω—è.
                queue.append(v)
                
    # –Ø–∫—â–æ —Ü–∏–∫–ª –∑–∞–≤–µ—Ä—à–∏–≤—Å—è —ñ —Å—Ç—ñ–∫ –Ω–µ –±—É–≤ –¥–æ—Å—è–≥–Ω—É—Ç–∏–π, —à–ª—è—Ö –≤—ñ–¥—Å—É—Ç–Ω—ñ–π.
    return False

# –í–∏–∑–Ω–∞—á–µ–Ω–Ω—è –æ—Å–Ω–æ–≤–Ω–æ—ó —Ñ—É–Ω–∫—Ü—ñ—ó –∞–ª–≥–æ—Ä–∏—Ç–º—É –ï–¥–º–æ–Ω–¥—Å–∞-–ö–∞—Ä–ø–∞.
def edmonds_karp(capacity_matrix, source, sink):
    """–û–±—á–∏—Å–ª—é—î –º–∞–∫—Å–∏–º–∞–ª—å–Ω–∏–π –ø–æ—Ç—ñ–∫ –∑ source –¥–æ sink."""
    # –ó–∞–≥–∞–ª—å–Ω–∞ –∫—ñ–ª—å–∫—ñ—Å—Ç—å –≤—É–∑–ª—ñ–≤.
    num_nodes = len(capacity_matrix)
    # –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è –º–∞—Ç—Ä–∏—Ü—ñ –ø–æ—Ç–æ–∫—É –Ω—É–ª—è–º–∏.
    flow_matrix = [[0] * num_nodes for _ in range(num_nodes)] 
    # –ú–∞—Å–∏–≤ –¥–ª—è –±–∞—Ç—å–∫—ñ–≤—Å—å–∫–∏—Ö –≤—É–∑–ª—ñ–≤ (–∑–∞–ø–æ–≤–Ω—é—î—Ç—å—Å—è BFS).
    parent = [-1] * num_nodes
    # –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–≥–æ –ø–æ—Ç–æ–∫—É.
    max_flow = 0
    
    # –ì–æ–ª–æ–≤–Ω–∏–π —Ü–∏–∫–ª: –ø–æ–≤—Ç–æ—Ä—é—î–º–æ, –¥–æ–∫–∏ BFS –∑–Ω–∞—Ö–æ–¥–∏—Ç—å –∑–±—ñ–ª—å—à—É—é—á–∏–π —à–ª—è—Ö.
    while bfs(capacity_matrix, flow_matrix, source, sink, parent):
        # –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑—É—î–º–æ –ø–æ—Ç—ñ–∫ –Ω–∞ —à–ª—è—Ö—É —è–∫ –Ω–µ—Å–∫—ñ–Ω—á–µ–Ω–Ω—ñ—Å—Ç—å (–¥–ª—è –ø–æ—à—É–∫—É –º—ñ–Ω—ñ–º—É–º—É).
        path_flow = float('Inf')
        # –ü–æ—á–∏–Ω–∞—î–º–æ –∑ –∫—ñ–Ω—Ü–µ–≤–æ–≥–æ –≤—É–∑–ª–∞ (—Å—Ç—ñ–∫).
        s = sink
        
        # –†—É—Ö–∞—î–º–æ—Å—è –≤—ñ–¥ —Å—Ç–æ–∫—É –¥–æ –¥–∂–µ—Ä–µ–ª–∞ –¥–ª—è –≤–∏–∑–Ω–∞—á–µ–Ω–Ω—è –≤—É–∑—å–∫–æ–≥–æ –º—ñ—Å—Ü—è.
        while s != source:
            # u ‚Äî –ø–æ–ø–µ—Ä–µ–¥–Ω—ñ–π –≤—É–∑–æ–ª (–±–∞—Ç—å–∫–æ) s.
            u = parent[s]
            # –ó–Ω–∞—Ö–æ–¥–∏–º–æ –≤—É–∑—å–∫–µ –º—ñ—Å—Ü–µ: –º—ñ–Ω—ñ–º–∞–ª—å–Ω—É –∑–∞–ª–∏—à–∫–æ–≤—É –ø—Ä–æ–ø—É—Å–∫–Ω—É –∑–¥–∞—Ç–Ω—ñ—Å—Ç—å –Ω–∞ —à–ª—è—Ö—É.
            path_flow = min(path_flow, capacity_matrix[u][s] - flow_matrix[u][s])
            # –ü–µ—Ä–µ—Ö–æ–¥–∏–º–æ –¥–æ –ø–æ–ø–µ—Ä–µ–¥–Ω—å–æ–≥–æ –≤—É–∑–ª–∞.
            s = u
            
        # –ü–æ—á–∏–Ω–∞—î–º–æ –∑–Ω–æ–≤—É –≤—ñ–¥ —Å—Ç–æ–∫—É –¥–ª—è –æ–Ω–æ–≤–ª–µ–Ω–Ω—è –ø–æ—Ç–æ–∫—ñ–≤.
        v = sink
        # –†—É—Ö–∞—î–º–æ—Å—è –≤—ñ–¥ —Å—Ç–æ–∫—É –¥–æ –¥–∂–µ—Ä–µ–ª–∞ –¥–ª—è –æ–Ω–æ–≤–ª–µ–Ω–Ω—è –ø–æ—Ç–æ–∫—ñ–≤.
        while v != source:
            # u ‚Äî –ø–æ–ø–µ—Ä–µ–¥–Ω—ñ–π –≤—É–∑–æ–ª v.
            u = parent[v]
            # –ó–±—ñ–ª—å—à—É—î–º–æ –ø—Ä—è–º–∏–π –ø–æ—Ç—ñ–∫ –Ω–∞ –∑–Ω–∞–π–¥–µ–Ω—É –≤–µ–ª–∏—á–∏–Ω—É path_flow.
            flow_matrix[u][v] += path_flow
            # –ó–º–µ–Ω—à—É—î–º–æ (–∞–±–æ –∑–±—ñ–ª—å—à—É—î–º–æ) –∑–≤–æ—Ä–æ—Ç–Ω–∏–π –ø–æ—Ç—ñ–∫ (–∫–ª—é—á –¥–æ –∞–ª–≥–æ—Ä–∏—Ç–º—É –ï–¥–º–æ–Ω–¥—Å–∞-–ö–∞—Ä–ø–∞).
            flow_matrix[v][u] -= path_flow 
            # –ü–µ—Ä–µ—Ö–æ–¥–∏–º–æ –¥–æ –ø–æ–ø–µ—Ä–µ–¥–Ω—å–æ–≥–æ –≤—É–∑–ª–∞.
            v = u
            
        # –ó–±—ñ–ª—å—à—É—î–º–æ –∑–∞–≥–∞–ª—å–Ω–∏–π –º–∞–∫—Å–∏–º–∞–ª—å–Ω–∏–π –ø–æ—Ç—ñ–∫.
        max_flow += path_flow
        
    # –ü–æ–≤–µ—Ä—Ç–∞—î–º–æ –∑–∞–≥–∞–ª—å–Ω–∏–π –º–∞–∫—Å–∏–º–∞–ª—å–Ω–∏–π –ø–æ—Ç—ñ–∫ —Ç–∞ —Ñ—ñ–Ω–∞–ª—å–Ω—É –º–∞—Ç—Ä–∏—Ü—é –ø–æ—Ç–æ–∫—ñ–≤.
    return max_flow, flow_matrix

# --- 2. –ü–æ–±—É–¥–æ–≤–∞ –ì—Ä–∞—Ñ–∞ —Ç–∞ –ú–∞—Ç—Ä–∏—Ü—ñ –ü—Ä–æ–ø—É—Å–∫–Ω–æ—ó –ó–¥–∞—Ç–Ω–æ—Å—Ç—ñ  ---

# –°—Ç–≤–æ—Ä–µ–Ω–Ω—è —Å–ª–æ–≤–Ω–∏–∫–∞ –¥–ª—è –≤—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è —ñ–º–µ–Ω –≤—É–∑–ª—ñ–≤ –Ω–∞ —ó—Ö —á–∏—Å–ª–æ–≤—ñ —ñ–Ω–¥–µ–∫—Å–∏ (0-21).
# –í—Å—å–æ–≥–æ 22 —É–Ω—ñ–∫–∞–ª—å–Ω–∏—Ö –≤—É–∑–ª–∏ (20 –ª–æ–≥—ñ—Å—Ç–∏—á–Ω–∏—Ö + S + T).
# –í—ñ—Ä—Ç—É–∞–ª—å–Ω—ñ –≤—É–∑–ª–∏ S (–î–∂–µ—Ä–µ–ª–æ) —ñ T (–°—Ç—ñ–∫) –ø–æ—Ç—Ä—ñ–±–Ω—ñ –¥–ª—è –∑–∞—Å—Ç–æ—Å—É–≤–∞–Ω–Ω—è —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∏—Ö 
# –∞–ª–≥–æ—Ä–∏—Ç–º–∏ –≥—Ä–∞—Ñ–æ–≤–æ–≥–æ –ø–æ—à—É–∫—É  (–≤ —Ç.—á. –∞–ª–≥–æ—Ä–∏—Ç–º—É –ï–¥–º–æ–Ω–¥—Å–∞-–ö–∞—Ä–ø–∞) - –Ω–µ–æ–±—Ö—ñ–¥–Ω–æ —â–æ–± –≥—Ä–∞—Ñ 
# –º–∞–≤ –æ–¥–∏–Ω –≤—Ö—ñ–¥ (Source, S) —Ç–∞ –æ–¥–∏–Ω –≤–∏—Ö—ñ–¥ (Sink, T), —â–æ —î —Ñ—É–Ω–¥–∞–º–µ–Ω—Ç–∞–ª—å–Ω–æ—é –≤–∏–º–æ–≥–æ—é
# –¥–ª—è –º–æ–¥–µ–ª—é–≤–∞–Ω–Ω—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–≥–æ –ø–æ—Ç–æ–∫—É –≤ –≥—Ä–∞—Ñ–∞—Ö –∑ –±–∞–≥–∞—Ç—å–º–∞ –¥–∂–µ—Ä–µ–ª–∞–º–∏/—Å—Ç–æ–∫–∞–º–∏,
nodes = {
    'S': 0, 
    '–¢–µ—Ä–º—ñ–Ω–∞–ª 1': 1, '–¢–µ—Ä–º—ñ–Ω–∞–ª 2': 2,
    '–°–∫–ª–∞–¥ 1': 3, '–°–∫–ª–∞–¥ 2': 4, '–°–∫–ª–∞–¥ 3': 5, '–°–∫–ª–∞–¥ 4': 6,
    '–ú–∞–≥–∞–∑–∏–Ω 1': 7, '–ú–∞–≥–∞–∑–∏–Ω 2': 8, '–ú–∞–≥–∞–∑–∏–Ω 3': 9, '–ú–∞–≥–∞–∑–∏–Ω 4': 10, '–ú–∞–≥–∞–∑–∏–Ω 5': 11,
    '–ú–∞–≥–∞–∑–∏–Ω 6': 12, '–ú–∞–≥–∞–∑–∏–Ω 7': 13, '–ú–∞–≥–∞–∑–∏–Ω 8': 14, '–ú–∞–≥–∞–∑–∏–Ω 9': 15, '–ú–∞–≥–∞–∑–∏–Ω 10': 16,
    '–ú–∞–≥–∞–∑–∏–Ω 11': 17, '–ú–∞–≥–∞–∑–∏–Ω 12': 18, '–ú–∞–≥–∞–∑–∏–Ω 13': 19, '–ú–∞–≥–∞–∑–∏–Ω 14': 20, 
    'T': 21 # T —Ç–µ–ø–µ—Ä –º–∞—î —É–Ω—ñ–∫–∞–ª—å–Ω–∏–π —ñ–Ω–¥–µ–∫—Å 21.
}
# –ó–∞–≥–∞–ª—å–Ω–∞ –∫—ñ–ª—å–∫—ñ—Å—Ç—å –≤—É–∑–ª—ñ–≤ —Ç–µ–ø–µ—Ä 22 (—ñ–Ω–¥–µ–∫—Å–∏ 0-21).
num_nodes = 22 
# –í–µ–ª–∏–∫–µ —á–∏—Å–ª–æ, —â–æ –ø–æ–∑–Ω–∞—á–∞—î –Ω–µ–æ–±–º–µ–∂–µ–Ω—É –ø—Ä–æ–ø—É—Å–∫–Ω—É –∑–¥–∞—Ç–Ω—ñ—Å—Ç—å.
INF = 1000 
# –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è –º–∞—Ç—Ä–∏—Ü—ñ –ø—Ä–æ–ø—É—Å–∫–Ω–æ—ó –∑–¥–∞—Ç–Ω–æ—Å—Ç—ñ —Ä–æ–∑–º—ñ—Ä–æ–º 22x22 –Ω—É–ª—è–º–∏.
capacity_matrix = [[0] * num_nodes for _ in range(num_nodes)]

# –°–ø–∏—Å–æ–∫ —Ä–µ–±–µ—Ä —É —Ñ–æ—Ä–º–∞—Ç—ñ (–ø–æ—á–∞—Ç–æ–∫, –∫—ñ–Ω–µ—Ü—å, –ø—Ä–æ–ø—É—Å–∫–Ω–∞ –∑–¥–∞—Ç–Ω—ñ—Å—Ç—å).
edges = [
    ('S', '–¢–µ—Ä–º—ñ–Ω–∞–ª 1', INF), ('S', '–¢–µ—Ä–º—ñ–Ω–∞–ª 2', INF), # S –∑'—î–¥–Ω—É—î –¢–µ—Ä–º—ñ–Ω–∞–ª–∏.
    # –¢–µ—Ä–º—ñ–Ω–∞–ª–∏ -> –°–∫–ª–∞–¥–∏ (–ó–≥—ñ–¥–Ω–æ –∑ —Ç–∞–±–ª–∏—Ü–µ—é)
    ('–¢–µ—Ä–º—ñ–Ω–∞–ª 1', '–°–∫–ª–∞–¥ 1', 25), ('–¢–µ—Ä–º—ñ–Ω–∞–ª 1', '–°–∫–ª–∞–¥ 2', 20), ('–¢–µ—Ä–º—ñ–Ω–∞–ª 1', '–°–∫–ª–∞–¥ 3', 15),
    ('–¢–µ—Ä–º—ñ–Ω–∞–ª 2', '–°–∫–ª–∞–¥ 3', 15), ('–¢–µ—Ä–º—ñ–Ω–∞–ª 2', '–°–∫–ª–∞–¥ 4', 30), ('–¢–µ—Ä–º—ñ–Ω–∞–ª 2', '–°–∫–ª–∞–¥ 2', 10),
    # –°–∫–ª–∞–¥–∏ -> –ú–∞–≥–∞–∑–∏–Ω–∏ (–ó–≥—ñ–¥–Ω–æ –∑ —Ç–∞–±–ª–∏—Ü–µ—é)
    ('–°–∫–ª–∞–¥ 1', '–ú–∞–≥–∞–∑–∏–Ω 1', 15), ('–°–∫–ª–∞–¥ 1', '–ú–∞–≥–∞–∑–∏–Ω 2', 10), ('–°–∫–ª–∞–¥ 1', '–ú–∞–≥–∞–∑–∏–Ω 3', 20),
    ('–°–∫–ª–∞–¥ 2', '–ú–∞–≥–∞–∑–∏–Ω 4', 15), ('–°–∫–ª–∞–¥ 2', '–ú–∞–≥–∞–∑–∏–Ω 5', 10), ('–°–∫–ª–∞–¥ 2', '–ú–∞–≥–∞–∑–∏–Ω 6', 25),
    ('–°–∫–ª–∞–¥ 3', '–ú–∞–≥–∞–∑–∏–Ω 7', 20), ('–°–∫–ª–∞–¥ 3', '–ú–∞–≥–∞–∑–∏–Ω 8', 15), ('–°–∫–ª–∞–¥ 3', '–ú–∞–≥–∞–∑–∏–Ω 9', 10),
    ('–°–∫–ª–∞–¥ 4', '–ú–∞–≥–∞–∑–∏–Ω 10', 20), ('–°–∫–ª–∞–¥ 4', '–ú–∞–≥–∞–∑–∏–Ω 11', 10), ('–°–∫–ª–∞–¥ 4', '–ú–∞–≥–∞–∑–∏–Ω 12', 15),
    ('–°–∫–ª–∞–¥ 4', '–ú–∞–≥–∞–∑–∏–Ω 13', 5), ('–°–∫–ª–∞–¥ 4', '–ú–∞–≥–∞–∑–∏–Ω 14', 10)
]

# –ó–∞–ø–æ–≤–Ω–µ–Ω–Ω—è –º–∞—Ç—Ä–∏—Ü—ñ –ø—Ä–æ–ø—É—Å–∫–Ω–æ—ó –∑–¥–∞—Ç–Ω–æ—Å—Ç—ñ –¥–∞–Ω–∏–º–∏ –∑ edges.
for u_name, v_name, cap in edges:
    u = nodes[u_name]
    v = nodes[v_name]
    capacity_matrix[u][v] = cap

# –°–ø–∏—Å–æ–∫ —ñ–º–µ–Ω –º–∞–≥–∞–∑–∏–Ω—ñ–≤.
shops = [f'–ú–∞–≥–∞–∑–∏–Ω {i}' for i in range(1, 15)]
# –Ü–Ω–¥–µ–∫—Å –°—É–ø–µ—Ä—Å—Ç–æ–∫—É.
T_index = nodes['T']
# –ó'—î–¥–Ω–∞–Ω–Ω—è –≤—Å—ñ—Ö –º–∞–≥–∞–∑–∏–Ω—ñ–≤ –∑—ñ –°—É–ø–µ—Ä—Å—Ç–æ–∫–æ–º (T).
for shop_name in shops:
    # capacity_matrix[nodes[shop_name]][T_index] = INF - –ú–∏ –º–æ–∂–µ–º–æ –≤—Å—Ç–∞–Ω–æ–≤–ª—é–≤–∞—Ç–∏ —Ä–µ–∞–ª—å–Ω—É –ø–æ—Ç—Ä–µ–±—É –º–∞–≥–∞–∑–∏–Ω—É
    # –Ø–∫—â–æ –ø—Ä–∏–ø—É—Å—Ç–∏—Ç–∏, —â–æ –ø–æ—Ç—Ä–µ–±–∞ –º–∞–≥–∞–∑–∏–Ω—É 1-14 –æ–±–º–µ–∂–µ–Ω–∞ –π–æ–≥–æ –ø—Ä–æ–ø—É—Å–∫–Ω–æ—é –∑–¥–∞—Ç–Ω—ñ—Å—Ç—é, 
    # –∞ –ø–æ—Ç—ñ–∫ –≤ T –ø–æ–≤–∏–Ω–µ–Ω –±—É—Ç–∏ –Ω–µ–æ–±–º–µ–∂–µ–Ω–∏–º, —â–æ–± –Ω–µ –≤–ø–ª–∏–≤–∞—Ç–∏ –Ω–∞ Min-Cut, 
    # –∑–∞–ª–∏—à–∞—î–º–æ INF (–Ω–µ—Å–∫—ñ–Ω—á–µ–Ω–Ω—ñ—Å—Ç—å).
    capacity_matrix[nodes[shop_name]][T_index] = INF 

# --- 3. –ü–æ–±—É–¥–æ–≤–∞ –ì—Ä–∞—Ñ–∞ –¥–ª—è –í—ñ–∑—É–∞–ª—ñ–∑–∞—Ü—ñ—ó (NetworkX) ---

# –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –æ—Ä—ñ—î–Ω—Ç–æ–≤–∞–Ω–æ–≥–æ –≥—Ä–∞—Ñ–∞ NetworkX.
G = nx.DiGraph()

# –ó–±–∏—Ä–∞—î–º–æ –≤—Å—ñ —Ä–µ–±—Ä–∞ —É —Ñ–æ—Ä–º–∞—Ç—ñ (u_idx, v_idx, capacity) –¥–ª—è NetworkX.
all_edges_for_graph = []
for u_name, v_name, cap in edges:
    all_edges_for_graph.append((nodes[u_name], nodes[v_name], cap))
# –î–æ–¥–∞—î–º–æ —Ä–µ–±—Ä–∞ –ú–∞–≥–∞–∑–∏–Ω–∏ -> T.
for shop_name in shops:
    all_edges_for_graph.append((nodes[shop_name], T_index, capacity_matrix[nodes[shop_name]][T_index]))

# –î–æ–¥–∞–≤–∞–Ω–Ω—è –≤—Å—ñ—Ö —Ä–µ–±–µ—Ä –¥–æ –≥—Ä–∞—Ñ–∞ G.
G.add_weighted_edges_from(all_edges_for_graph)

# –°–ª–æ–≤–Ω–∏–∫ –¥–ª—è –≤—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è —ñ–Ω–¥–µ–∫—Å—ñ–≤ –Ω–∞ —ñ–º–µ–Ω–∞ –≤—É–∑–ª—ñ–≤.
node_labels = {idx: name for name, idx in nodes.items()}

# –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –ø–æ–∑–∏—Ü—ñ–π (–∫–æ–æ—Ä–¥–∏–Ω–∞—Ç) –¥–ª—è –≤—ñ–∑—É–∞–ª—ñ–∑–∞—Ü—ñ—ó, —â–æ –≤—ñ–¥–ø–æ–≤—ñ–¥–∞—é—Ç—å —Å—Ö–µ–º—ñ.
pos = {}
# –ü–æ–∑–∏—Ü—ñ—ó –¥–ª—è S —Ç–∞ T (–≤—ñ—Ä—Ç—É–∞–ª—å–Ω—ñ)
pos[nodes['S']] = (0, 0)
pos[nodes['T']] = (12, 0) # –ó–º—ñ—â–µ–Ω–æ T, —â–æ–± –≤—ñ–¥–æ–∫—Ä–µ–º–∏—Ç–∏ –≤—ñ–¥ M14 (20).

# –ü–æ–∑–∏—Ü—ñ—ó –¥–ª—è –ª–æ–≥—ñ—Å—Ç–∏—á–Ω–∏—Ö –≤—É–∑–ª—ñ–≤
pos[nodes['–¢–µ—Ä–º—ñ–Ω–∞–ª 1']] = (3, 3)
pos[nodes['–¢–µ—Ä–º—ñ–Ω–∞–ª 2']] = (3, -3)
pos[nodes['–°–∫–ª–∞–¥ 1']] = (6, 4)
pos[nodes['–°–∫–ª–∞–¥ 2']] = (6, 2)
pos[nodes['–°–∫–ª–∞–¥ 3']] = (6, -2)
pos[nodes['–°–∫–ª–∞–¥ 4']] = (6, -4)

# –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è –ø–æ–∑–∏—Ü—ñ–π –¥–ª—è –≤—Å—ñ—Ö –º–∞–≥–∞–∑–∏–Ω—ñ–≤.
shop_positions = {
    '–ú–∞–≥–∞–∑–∏–Ω 1': (9, 5.0), '–ú–∞–≥–∞–∑–∏–Ω 2': (9, 4.0), '–ú–∞–≥–∞–∑–∏–Ω 3': (9, 3.0), '–ú–∞–≥–∞–∑–∏–Ω 4': (9, 2.0), 
    '–ú–∞–≥–∞–∑–∏–Ω 5': (9, 1.0), '–ú–∞–≥–∞–∑–∏–Ω 6': (9, 0.0), '–ú–∞–≥–∞–∑–∏–Ω 7': (9, -1.0), '–ú–∞–≥–∞–∑–∏–Ω 8': (9, -2.0),
    '–ú–∞–≥–∞–∑–∏–Ω 9': (9, -3.0), '–ú–∞–≥–∞–∑–∏–Ω 10': (9, -4.0), '–ú–∞–≥–∞–∑–∏–Ω 11': (9, -5.0), '–ú–∞–≥–∞–∑–∏–Ω 12': (9, -6.0),
    '–ú–∞–≥–∞–∑–∏–Ω 13': (9, -7.0), '–ú–∞–≥–∞–∑–∏–Ω 14': (9, -8.0) 
}

for name, coord in shop_positions.items():
    pos[nodes[name]] = coord

# --- 4. –í—ñ–∑—É–∞–ª—ñ–∑–∞—Ü—ñ—è –ì—Ä–∞—Ñ–∞ (–ë–ª–æ–∫ –∑–∞–∫–æ–º–µ–Ω—Ç–æ–≤–∞–Ω–æ) ---

# –ë–ª–æ–∫ –≤—ñ–∑—É–∞–ª—ñ–∑–∞—Ü—ñ—ó –∑–∞–∫–æ–º–µ–Ω—Ç–æ–≤–∞–Ω–æ, –æ—Å–∫—ñ–ª—å–∫–∏ –≤–∏–∫–æ–Ω–∞–Ω–Ω—è –≥—Ä–∞—Ñ—ñ—á–Ω–∏—Ö –∫–æ–º–∞–Ω–¥ (plt.show())
# –Ω–µ –ø—ñ–¥—Ç—Ä–∏–º—É—î—Ç—å—Å—è —É —Ç–µ–∫—Å—Ç–æ–≤–æ–º—É —Å–µ—Ä–µ–¥–æ–≤–∏—â—ñ.
# plt.figure(figsize=(15, 12))
# nx.draw(G, pos, with_labels=False, node_size=1500, node_color="lightblue", font_size=10, font_weight="bold", arrows=True)
# nx.draw_networkx_labels(G, pos, labels=node_labels, font_size=8)
# edge_labels = nx.get_edge_attributes(G, 'weight')
# nx.draw_networkx_edge_labels(G, pos, edge_labels=edge_labels, font_color='red')
# plt.title("–õ–æ–≥—ñ—Å—Ç–∏—á–Ω–∞ –º–µ—Ä–µ–∂–∞ –∑ –ø—Ä–æ–ø—É—Å–∫–Ω–∏–º–∏ –∑–¥–∞—Ç–Ω–æ—Å—Ç—è–º–∏ (Max Flow Model)")
# plt.show()

# --- 5. –í–∏–∫–æ–Ω–∞–Ω–Ω—è –ê–ª–≥–æ—Ä–∏—Ç–º—É —Ç–∞ –†–µ–∫–æ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—è –ü–æ—Ç–æ–∫—É ---

# –í—Å—Ç–∞–Ω–æ–≤–ª—é—î–º–æ —ñ–Ω–¥–µ–∫—Å –¥–∂–µ—Ä–µ–ª–∞ (S).
source_node = nodes['S']
# –í—Å—Ç–∞–Ω–æ–≤–ª—é—î–º–æ —ñ–Ω–¥–µ–∫—Å —Å—Ç–æ–∫—É (T).
sink_node = nodes['T']
# –ó–∞–ø—É—Å–∫–∞—î–º–æ –∞–ª–≥–æ—Ä–∏—Ç–º –ï–¥–º–æ–Ω–¥—Å–∞-–ö–∞—Ä–ø–∞.
max_flow, flow_matrix = edmonds_karp(capacity_matrix, source_node, sink_node)

# –°–ª–æ–≤–Ω–∏–∫ –¥–ª—è –æ–±–µ—Ä–Ω–µ–Ω–æ–≥–æ –ø–æ—à—É–∫—É —ñ–º–µ–Ω –≤—É–∑–ª—ñ–≤.
reverse_nodes = {v: k for k, v in nodes.items()}
# –°–ø–∏—Å–∫–∏ —Ç–µ—Ä–º—ñ–Ω–∞–ª—ñ–≤ —ñ —Å–∫–ª–∞–¥—ñ–≤.
terminals = ['–¢–µ—Ä–º—ñ–Ω–∞–ª 1', '–¢–µ—Ä–º—ñ–Ω–∞–ª 2']
warehouses = ['–°–∫–ª–∞–¥ 1', '–°–∫–ª–∞–¥ 2', '–°–∫–ª–∞–¥ 3', '–°–∫–ª–∞–¥ 4']

# –õ–æ–≥—ñ–∫–∞ –†–µ–∫–æ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—ó –ü–æ—Ç–æ–∫—É: –ö—Ä–æ–∫ 1 (–í—Ö—ñ–¥ —É –°–∫–ª–∞–¥–∏)
warehouse_inflow = {w: 0 for w in warehouses}
for w in warehouses:
    w_idx = nodes[w]
    # –°—É–º–∞—Ä–Ω–∏–π –ø–æ—Ç—ñ–∫ —É —Å–∫–ª–∞–¥ W –∑ —É—Å—ñ—Ö —Ç–µ—Ä–º—ñ–Ω–∞–ª—ñ–≤
    inflow_sum = sum(flow_matrix[nodes[t]][w_idx] for t in terminals)
    warehouse_inflow[w] = inflow_sum

# –õ–æ–≥—ñ–∫–∞ –†–µ–∫–æ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—ó –ü–æ—Ç–æ–∫—É: –ö—Ä–æ–∫ 2 (–ß–∞—Å—Ç–∫–∞ –¢–µ—Ä–º—ñ–Ω–∞–ª–∞ —É –ø–æ—Ç–æ—Ü—ñ –¥–æ –°–∫–ª–∞–¥—É)
term_to_warehouse_share = {t: {} for t in terminals}
for t in terminals:
    t_idx = nodes[t]
    for w in warehouses:
        w_idx = nodes[w]
        inflow = flow_matrix[t_idx][w_idx]
        total_inflow = warehouse_inflow[w]
        # –ß–∞—Å—Ç–∫–∞ –¢–µ—Ä–º—ñ–Ω–∞–ª–∞ t —É –∑–∞–≥–∞–ª—å–Ω–æ–º—É –ø–æ—Ç–æ—Ü—ñ –°–∫–ª–∞–¥—É w.
        share = inflow / total_inflow if total_inflow > 0 else 0
        term_to_warehouse_share[t][w] = share

# –õ–æ–≥—ñ–∫–∞ –†–µ–∫–æ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—ó –ü–æ—Ç–æ–∫—É: –ö—Ä–æ–∫ 3 (–†–æ–∑–ø–æ–¥—ñ–ª –¥–æ –ú–∞–≥–∞–∑–∏–Ω—ñ–≤)
term_to_shop_flow = {t: {s: 0 for s in shops} for t in terminals}
for w in warehouses:
    w_idx = nodes[w]
    for s in shops:
        s_idx = nodes[s]
        warehouse_to_shop_flow = flow_matrix[w_idx][s_idx] # –ü–æ—Ç—ñ–∫ –°–∫–ª–∞–¥ -> –ú–∞–≥–∞–∑–∏–Ω.
        
        for t in terminals:
            share = term_to_warehouse_share[t].get(w, 0)
            # –†–æ–∑–ø–æ–¥—ñ–ª—è—î–º–æ –ø–æ—Ç—ñ–∫ –°–∫–ª–∞–¥ -> –ú–∞–≥–∞–∑–∏–Ω –ø—Ä–æ–ø–æ—Ä—Ü—ñ–π–Ω–æ —á–∞—Å—Ç–∫–∞–º –¢–µ—Ä–º—ñ–Ω–∞–ª—ñ–≤.
            term_to_shop_flow[t][s] += warehouse_to_shop_flow * share

# –§–æ—Ä–º–∞—Ç—É–≤–∞–Ω–Ω—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ñ–≤ —É —Ñ—ñ–Ω–∞–ª—å–Ω—É —Ç–∞–±–ª–∏—Ü—é.
final_report_table = []
for t in terminals:
    for s in shops:
        flow = round(term_to_shop_flow[t][s]) # –û–∫—Ä—É–≥–ª–µ–Ω–Ω—è –¥–ª—è —á–∏—Ç–∞–±–µ–ª—å–Ω–æ—Å—Ç—ñ.
        final_report_table.append({'–¢–µ—Ä–º—ñ–Ω–∞–ª': t, '–ú–∞–≥–∞–∑–∏–Ω': s, '–§–∞–∫—Ç–∏—á–Ω–∏–π –ü–æ—Ç—ñ–∫': flow})

# –ó–±—ñ—Ä –∑–∞–≥–∞–ª—å–Ω–∏—Ö –ø–æ—Ç–æ–∫—ñ–≤ —É –ú–∞–≥–∞–∑–∏–Ω–∏ (–¥–ª—è –∞–Ω–∞–ª—ñ–∑—É).
shop_flows = []
for s in shops:
    # –ü–æ—Ç—ñ–∫ –ú–∞–≥–∞–∑–∏–Ω -> T –¥–æ—Ä—ñ–≤–Ω—é—î —Ñ–∞–∫—Ç–∏—á–Ω–æ–º—É –ø–æ—Ç–æ–∫—É –≤ –ú–∞–≥–∞–∑–∏–Ω.
    actual_flow_to_shop = flow_matrix[nodes[s]][T_index]
    shop_flows.append({
        '–ú–∞–≥–∞–∑–∏–Ω': s,
        '–ü–æ—Ç—ñ–∫ –¥–æ –ú–∞–≥–∞–∑–∏–Ω—É': actual_flow_to_shop
    })


# --- 5. –í–∏–≤—ñ–¥ –ó–≤—ñ—Ç—É —Ç–∞ –ê–Ω–∞–ª—ñ–∑  ---

# –û–±—á–∏—Å–ª–µ–Ω–Ω—è –Ω–µ–æ–±—Ö—ñ–¥–Ω–∏—Ö –∑–º—ñ–Ω–Ω–∏—Ö –¥–ª—è –∑–≤—ñ—Ç—É
flow_term1 = sum(item['–§–∞–∫—Ç–∏—á–Ω–∏–π –ü–æ—Ç—ñ–∫'] for item in final_report_table if item['–¢–µ—Ä–º—ñ–Ω–∞–ª'] == '–¢–µ—Ä–º—ñ–Ω–∞–ª 1')
flow_term2 = sum(item['–§–∞–∫—Ç–∏—á–Ω–∏–π –ü–æ—Ç—ñ–∫'] for item in final_report_table if item['–¢–µ—Ä–º—ñ–Ω–∞–ª'] == '–¢–µ—Ä–º—ñ–Ω–∞–ª 2')
# –°—É–º–∞—Ä–Ω–∞ –ø—Ä–æ–ø—É—Å–∫–Ω–∞ –∑–¥–∞—Ç–Ω—ñ—Å—Ç—å –Ω–∞ —Ä–æ–∑—Ä—ñ–∑—ñ –°–∫–ª–∞–¥–∏ -> –ú–∞–≥–∞–∑–∏–Ω–∏
min_cut_capacity = sum(capacity_matrix[nodes[w]][nodes[s]] for w in warehouses for s in shops)
max_shop_flow = max(shop_flows, key=lambda x: x['–ü–æ—Ç—ñ–∫ –¥–æ –ú–∞–≥–∞–∑–∏–Ω—É'])


# 5.0. –í–∏–≤—ñ–¥ –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–≥–æ –ü–æ—Ç–æ–∫—É
print(f"‚úÖ –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∏–π –ø–æ—Ç—ñ–∫ —É –º–µ—Ä–µ–∂—ñ: {max_flow} –æ–¥–∏–Ω–∏—Ü—å")
print("----------------------------------------------------------------------")
print("üìä –ó–≤—ñ—Ç: –ê–Ω–∞–ª—ñ–∑ –õ–æ–≥—ñ—Å—Ç–∏—á–Ω–æ—ó –ú–µ—Ä–µ–∂—ñ –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–≥–æ –ü–æ—Ç–æ–∫—É")
print("----------------------------------------------------------------------")

# 5.1. –ü–æ—è—Å–Ω–µ–Ω–Ω—è –º–æ–¥–µ–ª—ñ —Ç–∞ –æ–±—á–∏—Å–ª–µ–Ω–Ω—è
print("\n=== –ü–æ—è—Å–Ω–µ–Ω–Ω—è –ú–æ–¥–µ–ª—ñ —Ç–∞ –†–µ–∑—É–ª—å—Ç–∞—Ç–∏ –û–±—á–∏—Å–ª–µ–Ω—å ===")
print("–ü–æ–±—É–¥–æ–≤–∞–Ω–∞ –º–æ–¥–µ–ª—å –≥—Ä–∞—Ñ–∞ –∫–æ—Ä–µ–∫—Ç–Ω–æ –≤—ñ–¥–æ–±—Ä–∞–∂–∞—î –ª–æ–≥—ñ—Å—Ç–∏—á–Ω—É –º–µ—Ä–µ–∂—É –∑ 2 –¢–µ—Ä–º—ñ–Ω–∞–ª–∞–º–∏, 4 –°–∫–ª–∞–¥–∞–º–∏ —Ç–∞ 14 –ú–∞–≥–∞–∑–∏–Ω–∞–º–∏, –æ–±'—î–¥–Ω–∞–Ω–∏–º–∏ –°—É–ø–µ—Ä–¥–∂–µ—Ä–µ–ª–æ–º (S)  —Ç–∞ –°—É–ø–µ—Ä—Å—Ç–æ–∫–æ–º (T).")
print(f"–†–æ–∑—Ä–∞—Ö—É–Ω–æ–∫ –∞–ª–≥–æ—Ä–∏—Ç–º—É –ï–¥–º–æ–Ω–¥—Å–∞-–ö–∞—Ä–ø–∞ –ø–æ–∫–∞–∑–∞–≤, —â–æ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–∏–π –æ–±—Å—è–≥ –ø–æ—Å—Ç–∞—á–∞–Ω–Ω—è —Å—Ç–∞–Ω–æ–≤–∏—Ç—å {max_flow} –æ–¥–∏–Ω–∏—Ü—å.")
# print("–¶–µ –∑–Ω–∞—á–µ–Ω–Ω—è –ø—ñ–¥—Ç–≤–µ—Ä–¥–∂—É—î –¢–µ–æ—Ä–µ–º—É –ø—Ä–æ –º—ñ–Ω—ñ–º–∞–ª—å–Ω–∏–π —Ä–æ–∑—Ä—ñ–∑-–º–∞–∫—Å–∏–º–∞–ª—å–Ω–∏–π –ø–æ—Ç—ñ–∫.")
# print("–¢–∞–∫–∏–º —á–∏–Ω–æ–º, –¥–æ—Å—è–≥–Ω—É—Ç–æ –æ–ø—Ç–∏–º–∞–ª—å–Ω–æ–≥–æ –ø–æ—Ç–æ–∫—É.")
print("----------------------------------------------------------------------")

# 5.2. –¢–∞–±–ª–∏—Ü—è –ü–æ—Ç–æ–∫—ñ–≤
print("\n=== –¢–∞–±–ª–∏—Ü—è: –§–∞–∫—Ç–∏—á–Ω–∏–π –ü–æ—Ç—ñ–∫ –¢–µ—Ä–º—ñ–Ω–∞–ª -> –ú–∞–≥–∞–∑–∏–Ω ===")
header = f"{'–¢–µ—Ä–º—ñ–Ω–∞–ª':<12} | {'–ú–∞–≥–∞–∑–∏–Ω':<10} | {'–§–∞–∫—Ç–∏—á–Ω–∏–π –ü–æ—Ç—ñ–∫ (–æ–¥–∏–Ω–∏—Ü—å)':<25}"
print(header)
print("-" * len(header))
for item in final_report_table:
    print(f"{item['–¢–µ—Ä–º—ñ–Ω–∞–ª']:<12} | {item['–ú–∞–≥–∞–∑–∏–Ω']:<10} | {item['–§–∞–∫—Ç–∏—á–Ω–∏–π –ü–æ—Ç—ñ–∫']:<25}")
print("-" * 70)


print("\n--- –ê–Ω–∞–ª—ñ–∑ –û—Ç—Ä–∏–º–∞–Ω–∏—Ö –†–µ–∑—É–ª—å—Ç–∞—Ç—ñ–≤ —Ç–∞ –í—ñ–¥–ø–æ–≤—ñ–¥—ñ –Ω–∞ –ó–∞–ø–∏—Ç–∞–Ω–Ω—è ---")

# 1. –Ø–∫—ñ —Ç–µ—Ä–º—ñ–Ω–∞–ª–∏ –∑–∞–±–µ–∑–ø–µ—á—É—é—Ç—å –Ω–∞–π–±—ñ–ª—å—à–∏–π –ø–æ—Ç—ñ–∫ —Ç–æ–≤–∞—Ä—ñ–≤ –¥–æ –º–∞–≥–∞–∑–∏–Ω—ñ–≤?
print("\n1. –Ø–∫—ñ —Ç–µ—Ä–º—ñ–Ω–∞–ª–∏ –∑–∞–±–µ–∑–ø–µ—á—É—é—Ç—å –Ω–∞–π–±—ñ–ª—å—à–∏–π –ø–æ—Ç—ñ–∫ —Ç–æ–≤–∞—Ä—ñ–≤ –¥–æ –º–∞–≥–∞–∑–∏–Ω—ñ–≤?")
if flow_term1 == flow_term2:
    print(f"–¢–µ—Ä–º—ñ–Ω–∞–ª 1 –ø–æ—Å—Ç–∞—á–∞—î {flow_term1} –æ–¥–∏–Ω–∏—Ü—å. –¢–µ—Ä–º—ñ–Ω–∞–ª 2 –ø–æ—Å—Ç–∞—á–∞—î {flow_term2} –æ–¥–∏–Ω–∏—Ü—å.")
    print("–û–±–∏–¥–≤–∞ —Ç–µ—Ä–º—ñ–Ω–∞–ª–∏ –∑–∞–±–µ–∑–ø–µ—á—É—é—Ç—å –æ–¥–Ω–∞–∫–æ–≤–∏–π –ø–æ—Ç—ñ–∫.")
elif flow_term1 > flow_term2:
    print(f"–¢–µ—Ä–º—ñ–Ω–∞–ª 1 –ø–æ—Å—Ç–∞—á–∞—î {flow_term1} –æ–¥–∏–Ω–∏—Ü—å. –¢–µ—Ä–º—ñ–Ω–∞–ª 2 –ø–æ—Å—Ç–∞—á–∞—î {flow_term2} –æ–¥–∏–Ω–∏—Ü—å.")
    print(f"–¢–µ—Ä–º—ñ–Ω–∞–ª 1 –∑–∞–±–µ–∑–ø–µ—á—É—î –±—ñ–ª—å—à–∏–π –ø–æ—Ç—ñ–∫.")
else:
    print(f"–¢–µ—Ä–º—ñ–Ω–∞–ª 1 –ø–æ—Å—Ç–∞—á–∞—î {flow_term1} –æ–¥–∏–Ω–∏—Ü—å. –¢–µ—Ä–º—ñ–Ω–∞–ª 2 –ø–æ—Å—Ç–∞—á–∞—î {flow_term2} –æ–¥–∏–Ω–∏—Ü—å.")
    print(f"–¢–µ—Ä–º—ñ–Ω–∞–ª 2 –∑–∞–±–µ–∑–ø–µ—á—É—î –±—ñ–ª—å—à–∏–π –ø–æ—Ç—ñ–∫.")


# 2. –Ø–∫—ñ –º–∞—Ä—à—Ä—É—Ç–∏ –º–∞—é—Ç—å –Ω–∞–π–º–µ–Ω—à—É –ø—Ä–æ–ø—É—Å–∫–Ω—É –∑–¥–∞—Ç–Ω—ñ—Å—Ç—å —ñ —è–∫ —Ü–µ –≤–ø–ª–∏–≤–∞—î –Ω–∞ –∑–∞–≥–∞–ª—å–Ω–∏–π –ø–æ—Ç—ñ–∫?
print("\n2. –Ø–∫—ñ –º–∞—Ä—à—Ä—É—Ç–∏ –º–∞—é—Ç—å –Ω–∞–π–º–µ–Ω—à—É –ø—Ä–æ–ø—É—Å–∫–Ω—É –∑–¥–∞—Ç–Ω—ñ—Å—Ç—å —ñ —è–∫ —Ü–µ –≤–ø–ª–∏–≤–∞—î –Ω–∞ –∑–∞–≥–∞–ª—å–Ω–∏–π –ø–æ—Ç—ñ–∫?")
print(f"–ù–∞–π–º–µ–Ω—à–∞ —Å—É–º–∞—Ä–Ω–∞ –ø—Ä–æ–ø—É—Å–∫–Ω–∞ –∑–¥–∞—Ç–Ω—ñ—Å—Ç—å (–º—ñ–Ω—ñ–º–∞–ª—å–Ω–∏–π —Ä–æ–∑—Ä—ñ–∑) –∑–Ω–∞—Ö–æ–¥–∏—Ç—å—Å—è –Ω–∞ —Ä–æ–∑—Ä—ñ–∑—ñ –°–∫–ª–∞–¥–∏ -> –ú–∞–≥–∞–∑–∏–Ω–∏ ({min_cut_capacity} –æ–¥–∏–Ω–∏—Ü—å).")
print(f"–¶–µ –≤—É–∑—å–∫–µ –º—ñ—Å—Ü–µ –∫—Ä–∏—Ç–∏—á–Ω–æ –ª—ñ–º—ñ—Ç—É—î –∑–∞–≥–∞–ª—å–Ω–∏–π –ø–æ—Ç—ñ–∫ –º–µ—Ä–µ–∂—ñ –¥–æ {max_flow} –æ–¥–∏–Ω–∏—Ü—å.")
# –ü–æ—à—É–∫ –º—ñ–Ω—ñ–º–∞–ª—å–Ω–æ–≥–æ —ñ–Ω–¥–∏–≤—ñ–¥—É–∞–ª—å–Ω–æ–≥–æ —Ä–µ–±—Ä–∞
min_cap_edge = min(edges, key=lambda x: x[2])
print(f"–Ü–Ω–¥–∏–≤—ñ–¥—É–∞–ª—å–Ω–æ –Ω–∞–π–º–µ–Ω—à–∏–π –∫–∞–Ω–∞–ª: {min_cap_edge[0]} -> {min_cap_edge[1]} ({min_cap_edge[2]} –æ–¥–∏–Ω–∏—Ü—å).")


# 3. –Ø–∫—ñ –º–∞–≥–∞–∑–∏–Ω–∏ –æ—Ç—Ä–∏–º–∞–ª–∏ –Ω–∞–π–º–µ–Ω—à–µ —Ç–æ–≤–∞—Ä—ñ–≤ —ñ —á–∏ –º–æ–∂–Ω–∞ –∑–±—ñ–ª—å—à–∏—Ç–∏ —ó—Ö –ø–æ—Å—Ç–∞—á–∞–Ω–Ω—è?
min_flow_value = min(item['–ü–æ—Ç—ñ–∫ –¥–æ –ú–∞–≥–∞–∑–∏–Ω—É'] for item in shop_flows)
min_flow_shops = [item['–ú–∞–≥–∞–∑–∏–Ω'] for item in shop_flows if item['–ü–æ—Ç—ñ–∫ –¥–æ –ú–∞–≥–∞–∑–∏–Ω—É'] == min_flow_value]
min_flow_shops_names = [name.split(' ')[1] for name in min_flow_shops] 

if len(min_flow_shops) > 1:
    shops_list_str = ', '.join(min_flow_shops_names[:-1]) + f" —Ç–∞ {min_flow_shops_names[-1]}"
else:
    shops_list_str = min_flow_shops_names[0]

print("\n3. –Ø–∫—ñ –º–∞–≥–∞–∑–∏–Ω–∏ –æ—Ç—Ä–∏–º–∞–ª–∏ –Ω–∞–π–º–µ–Ω—à–µ —Ç–æ–≤–∞—Ä—ñ–≤ —ñ —á–∏ –º–æ–∂–Ω–∞ –∑–±—ñ–ª—å—à–∏—Ç–∏ —ó—Ö –ø–æ—Å—Ç–∞—á–∞–Ω–Ω—è?")
print(f"–ù–∞–π–º–µ–Ω—à–µ —Ç–æ–≤–∞—Ä—ñ–≤ ({min_flow_value} –æ–¥–∏–Ω–∏—Ü—å) –æ—Ç—Ä–∏–º–∞–ª–∏ –ú–∞–≥–∞–∑–∏–Ω(–∏) {shops_list_str}.")
print(f"–ù–∞–π–±—ñ–ª—å—à–µ —Ç–æ–≤–∞—Ä—ñ–≤ –æ—Ç—Ä–∏–º–∞–≤ –ú–∞–≥–∞–∑–∏–Ω {max_shop_flow['–ú–∞–≥–∞–∑–∏–Ω'].split(' ')[1]} ({max_shop_flow['–ü–æ—Ç—ñ–∫ –¥–æ –ú–∞–≥–∞–∑–∏–Ω—É']} –æ–¥–∏–Ω–∏—Ü—å).")
print(f"–¢–∞–∫, –ø–æ—Å—Ç–∞—á–∞–Ω–Ω—è —Ü–∏—Ö –º–∞–≥–∞–∑–∏–Ω—ñ–≤ –º–æ–∂–Ω–∞ –∑–±—ñ–ª—å—à–∏—Ç–∏, –∑–±—ñ–ª—å—à–∏–≤—à–∏ –ø—Ä–æ–ø—É—Å–∫–Ω—É –∑–¥–∞—Ç–Ω—ñ—Å—Ç—å –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω–∏—Ö –º–∞—Ä—à—Ä—É—Ç—ñ–≤.")


# 4. –ß–∏ —î –≤—É–∑—å–∫—ñ –º—ñ—Å—Ü—è, —è–∫—ñ –º–æ–∂–Ω–∞ —É—Å—É–Ω—É—Ç–∏ –¥–ª—è –ø–æ–∫—Ä–∞—â–µ–Ω–Ω—è –µ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—ñ –ª–æ–≥—ñ—Å—Ç–∏—á–Ω–æ—ó –º–µ—Ä–µ–∂—ñ?
print("\n4. –ß–∏ —î –≤—É–∑—å–∫—ñ –º—ñ—Å—Ü—è, —è–∫—ñ –º–æ–∂–Ω–∞ —É—Å—É–Ω—É—Ç–∏ –¥–ª—è –ø–æ–∫—Ä–∞—â–µ–Ω–Ω—è –µ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—ñ –ª–æ–≥—ñ—Å—Ç–∏—á–Ω–æ—ó –º–µ—Ä–µ–∂—ñ?")
print("–¢–∞–∫. –ì–æ–ª–æ–≤–Ω–µ –≤—É–∑—å–∫–µ –º—ñ—Å—Ü–µ ‚Äì —Ü–µ —Å—É–∫—É–ø–Ω—ñ—Å—Ç—å —É—Å—ñ—Ö —Ä–µ–±–µ—Ä –≤—ñ–¥ –°–∫–ª–∞–¥—ñ–≤ –¥–æ –ú–∞–≥–∞–∑–∏–Ω—ñ–≤.")
print("–î–ª—è –∑–±—ñ–ª—å—à–µ–Ω–Ω—è –∑–∞–≥–∞–ª—å–Ω–æ–≥–æ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–≥–æ –ø–æ—Ç–æ–∫—É (–ø—ñ–¥–≤–∏—â–µ–Ω–Ω—è –µ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—ñ) –Ω–µ–æ–±—Ö—ñ–¥–Ω–æ —ñ–Ω–≤–µ—Å—Ç—É–≤–∞—Ç–∏ —É –∑–±—ñ–ª—å—à–µ–Ω–Ω—è –ø—Ä–æ–ø—É—Å–∫–Ω–æ—ó –∑–¥–∞—Ç–Ω–æ—Å—Ç—ñ –Ω–∞ —Ü—ñ–π –¥—ñ–ª—è–Ω—Ü—ñ –ª–æ–≥—ñ—Å—Ç–∏—á–Ω–æ–≥–æ –ª–∞–Ω—Ü—é–≥–∞. ")
print(f"–§–∞–∫—Ç–∏—á–Ω–æ, –º—ñ–Ω—ñ–º–∞–ª—å–Ω–∏–π —Ä–æ–∑—Ä—ñ–∑ (–≤—É–∑—å–∫–µ –º—ñ—Å—Ü–µ) –¥–æ—Ä—ñ–≤–Ω—é—î –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–º—É –ø–æ—Ç–æ–∫—É: {max_flow} –æ–¥–∏–Ω–∏—Ü—å. –ó–±—ñ–ª—å—à–µ–Ω–Ω—è –ø—Ä–æ–ø—É—Å–∫–Ω–æ—ó –∑–¥–∞—Ç–Ω–æ—Å—Ç—ñ –Ω–∞ –±—É–¥—å-—è–∫–æ–º—É —Ä–µ–±—Ä—ñ, —â–æ –Ω–∞–ª–µ–∂–∏—Ç—å –º—ñ–Ω—ñ–º–∞–ª—å–Ω–æ–º—É —Ä–æ–∑—Ä—ñ–∑—É, –∑–±—ñ–ª—å—à–∏—Ç—å –∑–∞–≥–∞–ª—å–Ω–∏–π –ø–æ—Ç—ñ–∫.")
